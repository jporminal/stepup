(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"ra+S":function(t,e,r){"use strict";r.r(e);var i={name:"receipts",components:{my_update_status:function(){return r.e(54).then(r.bind(null,"CvYv"))},my_receipt:function(){return r.e(13).then(r.bind(null,"RNGb"))}},data:function(){return{options:{},headers:[{text:"Order#",value:"id",align:"center",sortable:!1},{text:"Customer",value:"customer",align:"center",sortable:!1},{text:"Exclusive of VAT",value:"taxable",align:"center",sortable:!1},{text:"VAT 5%",value:"vat",align:"center",sortable:!1},{text:"Total",value:"total",align:"center",sortable:!1},{text:"Notes",value:"notes",align:"center",sortable:!1},{text:"Status",value:"status",align:"center",sortable:!1},{text:"",value:"actions",align:"center",sortable:!1}]}},created:function(){this.pagination()},watch:{options:{handler:function(t){var e={filter:this.$store.state.Receipts.receipt_filter.filter,page:t.page,per_page:t.itemsPerPage};this.$store.commit("RECEIPT_FILTER",e),this.$store.state.Receipts.receipt_filter.filter?this.$store.dispatch("RECEIPT_FILTER",this.$store.state.Receipts.receipt_filter):this.pagination()},deep:!0}},methods:{receipt:function(t){this.$store.dispatch("RECEIPT",t),this.$store.commit("RECEIPT_OPEN_VIEWER",!0)},import_to_xero:function(t){var e=this;this.$store.dispatch("RECEIPT",t).then((function(t){e.$store.dispatch("IMPORT_TO_XERO",{token:e.$store.state.Xero.xero_token,tenant_id:e.$store.state.Xero.xero_tenants,xero:t.data}).then((function(t){e.$store.commit("SNACKBAR",{snackbar:!0,vertical:!1,timeout:2e3,color:"blue ligten-2",dark:!0,top:!0,bottom:!1,centered:!0,left:!1,right:!1,text:"Successfully imported"}),e.pagination()})).catch((function(t){console.log(t)}))})).catch((function(t){e.$store.commit("SNACKBAR",{snackbar:!0,vertical:!1,timeout:2e3,color:"red",dark:!0,top:!0,bottom:!1,centered:!0,left:!1,right:!1,text:"Xero token already expired bro!"})}))},update_receipt:function(t){this.$store.commit("RECEIPT_ITEMS",t),this.$store.commit("RECEIPT_UPDATE_STATUS_OPEN",!0)},pagination:function(){this.$store.commit("RECEIPT_LOADER",!0),this.$store.dispatch("RECEIPTS",this.$store.state.Receipts.receipt_filter)},filter_receipts:function(t){if(t.length>0){var e={filter:t,page:this.$store.state.Receipts.receipt_filter.page,per_page:this.$store.state.Receipts.receipt_filter.per_page};this.$store.commit("RECEIPT_FILTER",e),this.options={page:1,per_page:10},this.$store.dispatch("RECEIPT_FILTER",this.$store.state.Receipts.receipt_filter)}if(0==t.length){var r={filter:null,page:this.$store.state.Receipts.receipt_filter.page,per_page:this.$store.state.Receipts.receipt_filter.per_page};this.$store.commit("RECEIPT_FILTER",r),this.pagination()}}}},o=r("KHd+"),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-data-table",{attrs:{headers:t.headers,items:t.$store.state.Receipts.receipts.data,"server-items-length":t.$store.state.Receipts.receipts.total,loading:t.$store.state.Receipts.receipt_loader,options:t.options,"items-per-page":25,"footer-props":{"items-per-page-options":[25,35,50],"items-per-page-text":"Receipts per page","show-current-page":!0},"mobile-breakpoint":200},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.taxable",fn:function(e){var r=e.item;return[t._v("\n      "+t._s(t._f("currency")(r.excl))+"\n    ")]}},{key:"item.vat",fn:function(e){var r=e.item;return[t._v("\n      "+t._s(t._f("currency")(r.vat))+"\n    ")]}},{key:"item.total",fn:function(e){var r=e.item;return[t._v("\n      "+t._s(t._f("currency")(r.amount_incl))+"\n    ")]}},{key:"item.status",fn:function(e){var i=e.item;return[r("p",{class:"completed"==i.status?"success white--text":"cancelled"==i.status?"error white--text":"primary white--text",attrs:{dark:""}},[t._v("\n        "+t._s(t._f("toUpper")(i.status))+"\n      ")])]}},{key:"top",fn:function(){return[r("v-toolbar",{attrs:{color:"blue lighten-2 white--text",flat:""}},[r("v-toolbar-title",[t._v(" "+t._s("receipts"==t.$route.name?"Receipts":"Xero")+" ")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-text-field",{staticClass:"mt-6",attrs:{label:"Receipt Number",solo:""},on:{input:t.filter_receipts}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,s=e.attrs;return[r("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.update_receipt(i)}}},"v-icon",s,!1),o),[t._v("\n            mdi-file-document-edit-outline\n          ")])]}}],null,!0)},[t._v(" "),r("span",[t._v(" Update status of receipt# "+t._s(i.id)+" ")])]),t._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,s=e.attrs;return[r("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.receipt(i.id)}}},"v-icon",s,!1),o),[t._v("\n            mdi-receipt\n          ")])]}}],null,!0)},[t._v(" "),r("span",[t._v(" View receipt# "+t._s(i.id)+" ")])]),t._v(" "),"xero"==t.$route.name&&null==i.xero?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,s=e.attrs;return[r("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.import_to_xero(i.id)}}},"v-icon",s,!1),o),[t._v("\n            mdi-file-import\n          ")])]}}],null,!0)},[t._v(" "),r("span",[t._v(" Import to Xero "+t._s(i.id)+" ")])]):t._e()]}}])}),t._v(" "),t.$store.state.Receipts.receipt_update_status_open?r("my_update_status"):t._e(),t._v(" "),t.$store.state.Receipts.receipt_open_viewer?r("my_receipt"):t._e()],1)}),[],!1,null,null,null);e.default=s.exports}}]);