(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{gbQB:function(t,e,n){"use strict";n.r(e);var a={name:"parent-view",components:{my_childs:function(){return n.e(51).then(n.bind(null,"FZ8J"))},new_child:function(){return n.e(2).then(n.bind(null,"3LvB"))},manage_parent:function(){return n.e(50).then(n.bind(null,"lYHn"))}},data:function(){return{options:{},headers:[{text:"Name",value:"name",align:"center",sortable:!1},{text:"Contact",value:"contact",align:"center",sortable:!1},{text:"Email",value:"email",align:"center",sortable:!1},{text:"",value:"actions",align:"center",sortable:!1}]}},mounted:function(){this.pagination()},watch:{options:{handler:function(t){var e={filter:this.$store.state.Parents.parent_filter.filter,page:t.page,per_page:t.itemsPerPage};this.$store.commit("PARENT_FILTER",e),this.$store.state.Parents.parent_filter.filter?this.$store.dispatch("PARENT_FILTER",this.$store.state.Parents.parent_filter):this.pagination()},deep:!0}},methods:{edit:function(t){var e=this;this.$store.dispatch("GET_PARENT_ID",{email:t.email}).then((function(t){e.$store.commit("PARENT_OPEN",!0)}))},students:function(t){var e=this;this.$store.dispatch("GET_PARENT_ID",{email:t.email}).then((function(t){e.$store.dispatch("GET_CHILD",t.data.mid)}))},add:function(t){var e=this;this.$store.dispatch("GET_PARENT_ID",{email:t.email}).then((function(t){var n={mid:t.data.mid,child:{first_name:null,family_name:null,gender:"Male",dob:(new Date).toISOString().substr(0,10),nationality:null},medical:{allergies:!1,textallergies:null,respiratory:!1,textrespiratory:null,physical:!1,textphysical:null,vision:!1,textvision:null,hearing:!1,texthearing:null,otherhealth:!1,textotherhealth:null},prescription:{antiseptic:!0,textantiseptic:null,plasters:!0,textplasters:null,insectbite:!0,textinsectbite:null,firstaid:!0,textfirstaid:null,calpol:!0,textcalpol:null,ice:!0,textice:null}};e.$store.commit("ENROLLMENT_CHILD",n),e.$store.commit("ENROLLMENT_CHILD_NEW",!0)}))},filter:function(t){if(t.length>2){e={filter:t,page:this.$store.state.Parents.parents.current_page,per_page:this.$store.state.Parents.parents.per_page};this.$store.commit("PARENT_FILTER",e),this.options={page:1,per_page:10},this.$store.commit("PARENT_LOADING",!0),this.$store.dispatch("PARENT_FILTER",this.$store.state.Parents.parent_filter)}if(0==t.length){var e={filter:null,page:this.$store.state.Parents.parents.current_page,per_page:this.$store.state.Parents.parents.per_page};this.$store.commit("PARENT_FILTER",e),this.pagination()}},pagination:function(){this.$store.commit("PARENT_LOADING",!0),this.$store.dispatch("PARENTS",this.$store.state.Parents.parent_filter)}}},i=n("KHd+"),s=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$store.state.Parents.parent_childs_open?n("my_childs"):t._e(),t._v(" "),t.$store.state.Enrollments.enrollment_child_new?n("new_child"):t._e(),t._v(" "),t.$store.state.Parents.parent_open?n("manage_parent"):t._e(),t._v(" "),n("v-card",[n("v-toolbar",{attrs:{color:"blue lighten-2 white--text",flat:""}},[n("v-toolbar-title",[t._v(" Parents ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-text-field",{staticClass:"mt-6",attrs:{label:"Filter Parent",solo:""},on:{input:t.filter}})],1),t._v(" "),n("v-data-table",{attrs:{headers:t.headers,items:t.$store.state.Parents.parents.data,"server-items-length":t.$store.state.Parents.parents.total,loading:t.$store.state.Parents.parent_loading,options:t.options,"items-per-page":10,"footer-props":{"items-per-page-options":[10,15,20,-1],"items-per-page-text":"Students per page","show-current-page":!0},"mobile-breakpoint":200},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(t._f("toUpper")(n.first_name))+" "+t._s(t._f("toUpper")(n.family_name))+"\n      ")]}},{key:"item.actions",fn:function(e){var a=e.item;return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[n("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.edit(a)}}},"v-icon",s,!1),i),[t._v("\n              mdi-pencil\n            ")])]}}],null,!0)},[t._v(" "),n("span",[t._v(" Edit ")])]),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[n("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.students(a)}}},"v-icon",s,!1),i),[t._v("\n              mdi-eye\n            ")])]}}],null,!0)},[t._v(" "),n("span",[t._v(" View Child ")])]),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[n("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.add(a)}}},"v-icon",s,!1),i),[t._v("\n              mdi-plus\n            ")])]}}],null,!0)},[t._v(" "),n("span",[t._v(" Add New Child ")])])]}}])})],1)],1)}),[],!1,null,null,null);e.default=s.exports}}]);